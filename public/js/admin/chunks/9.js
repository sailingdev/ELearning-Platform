(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{29:function(t,e,a){var i=a(70);"string"==typeof i&&(i=[[t.i,i,""]]);var r={hmr:!0,transform:void 0,insertInto:void 0};a(4)(i,r);i.locals&&(t.exports=i.locals)},504:function(t,e,a){"use strict";a.r(e);a(25),a(26),a(27);var i=a(13),r={name:"BlogEdit",props:{id:String},data:function(){return{image_src:"",content:"",category:1,title:"",cover_image:"",err_title:"",err_cover_image:"",err_content:""}},components:{quillEditor:i.quillEditor},methods:{onFileChange:function(t){var e=t.target.files||t.dataTransfer.files;e.length&&(this.cover_image=e[0],this.createImage(e[0]))},createImage:function(t){new Image;var e=new FileReader,a=this;e.onload=function(t){a.image_src=t.target.result},e.readAsDataURL(t)},removeImage:function(t){this.image_src=""},onSubmit:function(){var t=this,e=this.id,a=new FormData;a.append("title",this.title),a.append("category",this.category),a.append("content",this.content),a.append("cover_image",this.cover_image),a.append("_method","PUT"),this.$store.commit("SET_BEARER"),this.$store.dispatch("blog/update",{config:{headers:{"content-type":"multipart/form-data"}},id:e,data:a}).then((function(){t.successAlert(),t.$router.push(t.$router.currentRoute.query.to||"/admin/blog/list")})).catch((function(e){if(422===e.response.status){var a=e.response.data.errors;for(var i in a)switch(i){case"title":t.err_title=a[i][0].replace(/[^a-zA-Z0-9 ]/g,"");break;case"cover_image":t.err_cover_image=a[i][0].replace(/[^a-zA-Z0-9 ]/g,"");break;case"content":t.err_content=a[i][0].replace(/[^a-zA-Z0-9 ]/g,"")}}}))},onResetMSG:function(){this.err_cover_image="",this.err_title="",this.err_content=""},successAlert:function(){this.$vs.notify({color:"success",title:"Successfully Updated !",text:"A blog is successfully updated."})}},computed:{errMSG:function(){return{title:this.err_title,cover_image:this.err_cover_image,content:this.err_content}}},mounted:function(){var t=this;this.$store.commit("SET_BEARER"),this.$store.dispatch("blog/show",this.id).then((function(e){t.image_src=e.cover_image,t.content=e.content,t.category=e.category_id,t.title=e.title,t.content=e.content}))}},o=(a(69),a(1)),n=Object(o.a)(r,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"vx-row "},[a("div",{staticClass:"vx-col w-full lg:w-3/12 mb-base mw-32"},[a("vx-card",{on:{focusin:t.onResetMSG}},[a("p",{staticClass:"text-black mb-4"},[t._v("Properties")]),t._v(" "),a("vs-alert",{attrs:{active:!!t.errMSG.title,color:"danger","icon-pack":"feather",icon:"icon-info"}},[a("span",[t._v(t._s(t.errMSG.title))])]),t._v(" "),a("vs-textarea",{staticClass:"w-full mt-3 mb-5",attrs:{label:"Blog Title"},model:{value:t.title,callback:function(e){t.title=e},expression:"title"}}),t._v(" "),a("div",{staticClass:"mb-5",staticStyle:{"min-height":"200px"}},[t.image_src?a("div",[a("img",{staticClass:"cover_img",attrs:{src:t.image_src}}),t._v(" "),a("button",{on:{click:t.removeImage}},[t._v("Remove image")])]):a("div",[a("vs-alert",{attrs:{active:!!t.errMSG.cover_image,color:"danger","icon-pack":"feather",icon:"icon-info"}},[a("span",[t._v(t._s(t.errMSG.cover_image))])]),t._v(" "),a("p",{staticClass:"text-grey mb-3"},[t._v("Select cover image.")]),t._v(" "),a("input",{attrs:{type:"file"},on:{change:t.onFileChange}})],1)]),t._v(" "),a("p",{staticClass:"text-grey mb-3"},[t._v("Catetory")]),t._v(" "),a("ul",{staticClass:"centerx mb-12"},[a("li",[a("vs-radio",{attrs:{"vs-value":"1"},model:{value:t.category,callback:function(e){t.category=e},expression:"category"}},[t._v("Vocabulary")])],1),t._v(" "),a("li",[a("vs-radio",{attrs:{"vs-value":"2"},model:{value:t.category,callback:function(e){t.category=e},expression:"category"}},[t._v("Grammar")])],1),t._v(" "),a("li",[a("vs-radio",{attrs:{"vs-value":"3"},model:{value:t.category,callback:function(e){t.category=e},expression:"category"}},[t._v("Dialogues")])],1)]),t._v(" "),a("div",{staticClass:"text-right"},[a("form",{attrs:{enctype:"multipart/form-data"}},[a("vs-button",{staticClass:"btn btn-primary justify-end",on:{click:function(e){return e.preventDefault(),t.onSubmit(e)}}},[t._v("Submit")])],1)])],1)],1),t._v(" "),a("div",{staticClass:"vx-col w-full lg:w-8/12 mb-base"},[a("vx-card",{on:{focusin:t.onResetMSG}},[a("p",{staticClass:"text-grey mb-4"},[t._v("Build your blog page content.")]),t._v(" "),a("vs-alert",{staticClass:"mb-1",attrs:{active:!!t.errMSG.content,color:"danger","icon-pack":"feather",icon:"icon-info"}},[a("span",[t._v(t._s(t.errMSG.content))])]),t._v(" "),a("quill-editor",{model:{value:t.content,callback:function(e){t.content=e},expression:"content"}})],1)],1)])}),[],!1,null,null,null);e.default=n.exports},69:function(t,e,a){"use strict";a(29)},70:function(t,e,a){(t.exports=a(3)(!1)).push([t.i,".ql-editor{min-height:466px}[dir] .con-img-upload{text-align:-webkit-center}[dir] .con-input-upload{float:unset}.mw-32{min-width:320px}.cover_img{width:100%;display:block}[dir] .cover_img{margin:auto auto 10px;border-radius:5px}",""])}}]);